# This file is generated by Chef. Do not modify!
<% kw = @type == 'sshd_config' ? 'Match' : 'Host' %>
<% if node['fb_ssh']['support_config_d'] %>
Include /etc/ssh/<%= @type %>.d/*.conf
<% end %>
<% # Sort the keys so diffs are easier to read. %>
<% # But drop 'match' which (a) must be at the end and (b) must be ordered %>
<% node['fb_ssh'][@type].keys.
        reject { |x| x.start_with?(kw) }.
        sort.each do |key| %>
<%   val = node['fb_ssh'][@type][key] %>
<%   if val.is_a?(TrueClass) || val.is_a?(FalseClass) %>
<%=    key %> <%= val ? 'yes' : 'no' %>
<%   elsif val.is_a?(String) %>
<%=    key %> <%= val %>
<%   elsif val.is_a?(Array) %>
<%     if FB::SSH::MULTI_DEFINE_CONFIG_KEYS.include?(key) %>
<%       val.each do |v| %>
<%=        key %> <%= v %>
<%       end %>
<%     else %>
<%=      key %> <%= val.join(' ') %>
<%     end %>
<%   end %>
<% end %>

<% node['fb_ssh'][@type].keys.select { |x| x.start_with?(kw) }.
        each do |match| %>
<%=  match %>
<%   node['fb_ssh'][@type][match].keys.sort.each do |key| %>
<%     val = node['fb_ssh'][@type][match][key] %>
<%     if val.is_a?(TrueClass) || val.is_a?(FalseClass) %>
    <%=      key %> <%= val ? 'yes' : 'no' %>
<%     elsif val.is_a?(String) %>
    <%=      key %> <%= val %>
<%     elsif val.is_a?(Array) %>
    <%=      key %> <%= val.join(' ') %>
<%     end %>
<%   end %>
<% end %>

### This file generated by Chef. Changes will be overwritten.
<% FB::Iptables.each_table(@ip, node) do |table, chains| %>
*<%= table %>
<%   node['fb_iptables']['dynamic_chains'][table].keys.each do |chain| %>
-N <%= chain %>
<%   end %>
<%   chains.each do |name, chain| %>
<%     dynamic_chains = FB::Iptables.get_dynamic_chains(table, name, node) %>
:<%=   name %> <%= chain['policy'] %> [0:0]
<%       chain['rules'].each do |rule_name, rule| %>
<%         if FB::Iptables.rule_supports_ip_version?(rule, @ip) %>
# <%=        rule_name %>
<%           if rule['rules'] %>
<%             rule['rules'].each do |line| %>
-A <%=           name %> <%= line %>
<%             end %>
<%           end %>
<%           if rule['rule'] %>
-A <%=         name %> <%= rule['rule'] %>
<%           end %>
<%         end %>
<%       end %>
<%       
        unless dynamic_chains
          next
        end
        dynamic_chains.each do |dynamic_chain_name| %>
-A <%=    name %> -j <%= dynamic_chain_name %>
<%      end%>
<%    end %>
COMMIT

<% end %>
#Completed
